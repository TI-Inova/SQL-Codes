SELECT  ESA001_PRODUTO PRODUTO, 

        ESA001_DESCRICAO DESCRICAO, 

        ECB001_DESCCOMP PREFORMAGEM 

 

FROM ECTBB001 

 

JOIN ESTBA001 

  ON ESA001_GRUPO = ECB001_GRUPO 

 AND ESA001_EMPRESA = ECB001_EMPRESA 

 AND ESA001_PRODUTO = ECB001_COMPONENTE 

 

JOIN ESTBA008 

  ON ESA008_GRUPO = ECB001_GRUPO 

 AND ESA008_EMPRESA = ECB001_EMPRESA 

 AND ESA008_PRODUTO = ECB001_COMPONENTE 

  

WHERE ESA008_AREA = 2 

  AND ESA008_FAMILIA :FAMILIA 

  AND ESA008_GRUPOPROD :GRUPOPROD 

  AND ESA008_SUBGRUPO :SUBGRUPO 

 

  AND ECB001_DESCCOMP LIKE :OPCAO 

 

  AND ECB001_DESCCOMP IS NOT NULL 

 

GROUP BY ESA001_PRODUTO, 

         ESA001_DESCRICAO, 

         ECB001_DESCCOMP 